SELECT * UPDATE p1,p2 SET p1.(p1-[:CustomerOf]->b).reward=p1.(p1-[:CustomerOf]->b).reward+b.bonus,p2.(p2-[:CustomerOf]->b).reward=p2.(p2-[:CustomerOf]->b).reward+b.bonus WHERE (p1)-[:CustomerOf]->(b) AND (p1)-[:Recommended]->(p2)-[:CustomerOf]->(b) DELETE EDGE TYPE "Recommended"