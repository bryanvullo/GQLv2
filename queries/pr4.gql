Graph network = ACCESS("./network.n4j")
Graph output

THROUGH(DataPoint person : network) {
  CONDIF(
    person.HAS("firstName") AND 
    (person.firstName >> "A" AND person.firstName << "C")
  ) {
    output = output.PLUS(person)

    THROUGH(DataPoint friend : person ^ DataPoint) {
      CONDIF(
        friend.HAS("age") AND
        person.HAS("age") AND
        friend.age > person.age
      ) {
        Graph friendEmployers = friend ^ DataPoint
        friendEmployers = friendEmployers.CASE(identity.HAS("LABEL") AND identity.:LABEL i== "Cafe")
        
        CONDIF(friendEmployers i== False) {
          output = output.PLUS(friend)
          output = output.PLUS(person - Association ^ friend)
        }
      }
    }
  }
}

STDOUT(output)