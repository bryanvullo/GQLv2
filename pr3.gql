# pr3.gql
DataGraph graph = ACCESS("table.n4j")  # Access the input graph from the file "table.n4j" representing a graph of sports teams with their season's results
DataGraph result  # Create an empty graph called `result` to store the output

THROUGH (Node nodef1 : table) {
  THROUGH (Node nodef2 : table) {
    THROUGH (Node nodef3 : table) { 
      CONDIF (
        nodef1.points !== null AND nodef1.points i== nodef3.points AND
          ( (nodef3{:TYPE i== "DrewWith"}^nodef2 : table AND 
            nodef2{:TYPE i== "Beat"}^nodef1 : table)
            OR
            (nodef2{:TYPE i== "DrewWith"}^nodef3 : table AND 
            nodef2{:TYPE i== "Beat"}^nodef1 : table)
            )
            ) {
        output.PLUS(nodef1)
      }
    }
  }
}

STDOUT(result)  # Output the `result` graph consisting of nodes n0 whose `points` field value is non-null and equal to the `points` field value of n2